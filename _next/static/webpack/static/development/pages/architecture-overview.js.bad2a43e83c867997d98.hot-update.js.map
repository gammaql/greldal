{"version":3,"file":"static/webpack/static\\development\\pages\\architecture-overview.js.bad2a43e83c867997d98.hot-update.js","sources":["webpack:///./pages/architecture-overview.md"],"sourcesContent":["\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import NotificationBanner from '../components/NotificationBanner';\n\nexport default ({components, ...props}) => <MDXTag name=\"wrapper\"  components={components}>\n<NotificationBanner>\n⚠️ This document is not an introduction for beginners. If you are new to GRelDAL it is strongly recommended that you first go through the guides and the bugbox tutorial.\n</NotificationBanner>\n<MDXTag name=\"h1\" components={components} props={{\"id\":\"architecture-overview\"}}><MDXTag name=\"a\" components={components} parentName=\"h1\" props={{\"href\":\"#architecture-overview\",\"aria-hidden\":\"true\"}}><MDXTag name=\"span\" components={components} parentName=\"a\" props={{\"className\":\"icon icon-link\"}}></MDXTag></MDXTag>{`Architecture Overview`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`This post describes the architecture of GRelDAL at a high level for potential contributors. For lower level specifics, readers are encouraged to read the source.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`It is also advisable to go through the terminology section of the API Overview before going through the content below.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`There are four primary concepts around which GRelDAL is built:`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`Mapped Data Sources`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`Mapped Operations`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`Operation Resolvers`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`Operation Presets`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"mapped-data-sources\"}}><MDXTag name=\"a\" components={components} parentName=\"h2\" props={{\"href\":\"#mapped-data-sources\",\"aria-hidden\":\"true\"}}><MDXTag name=\"span\" components={components} parentName=\"a\" props={{\"className\":\"icon icon-link\"}}></MDXTag></MDXTag>{`Mapped data sources`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Mapped data sources represent a source in a relational database (usually a table, or a view, sometimes a joined table) which can serve as our primary source of truth.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`It is the responsibility of a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`MappedDataSource`}</MDXTag>{` instance to talk to the data source it represents. In many cases the actual data structure we expose to the application layer (referred here as Entities) differs from the table schema of the data source and in these cases it is the responsibility of the mapped data source to transparently convert between these representations and shield the application from having to know about the table schema.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Unlike ORMs, GRelDAL recommends usage of plain old javascript objects as entities.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`A `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`MappedDataSource`}</MDXTag>{` instance can be constructed by calling the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`mapDataSource`}</MDXTag>{` function, which accepts a mapping configuration.\nThis mapping configuration determines:`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`How the columns (in the source) are mapped to fields (of the entity).`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`What other data sources this data source can be associated with, and how can these associations be loaded.`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Data sources can \"cooperate\" (by transforming a shared query builder) when the operation spans over multiple data sources - eg. when performing operations on join tables.`}</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"mapped-operations\"}}><MDXTag name=\"a\" components={components} parentName=\"h2\" props={{\"href\":\"#mapped-operations\",\"aria-hidden\":\"true\"}}><MDXTag name=\"span\" components={components} parentName=\"a\" props={{\"className\":\"icon icon-link\"}}></MDXTag></MDXTag>{`Mapped Operations`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Operations generalize the concepts of Queries and mutations in GraphQL.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"metaString\":null}}>{`Operation // Abstract interface for an operation mapSchema can handle (1)\n   ^\n   |\n   |_ MappedOperation // Base class for GRelDAL aware operations\n         ^\n         |\n         |_ MappedSingleSourceOperation    // Base class for operations that operates on a single primary source\n         |     ^\n         |     |_ MappedSingleSourceQueryOperation\n         |     |_ MappedSingleSourceInsertionOperation\n         |     |_ MappedSingleSourceUpdateOperation\n         |     |_ MappedSingleSourceDeletionOperation\n         |\n         |_ MappedMultiSourceOperation    // Base class for operations that operate on multiple sources\n               ^\n               |_ MappedMultiSourceUnionQueryOperation\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Operations delegate the actual resolution to an associated operation resolver. All the information that the resolver may need are encapsulated in the ResolverContext DTO which is instantiated by the Operation implementation. `}</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"operation-resolvers\"}}><MDXTag name=\"a\" components={components} parentName=\"h2\" props={{\"href\":\"#operation-resolvers\",\"aria-hidden\":\"true\"}}><MDXTag name=\"span\" components={components} parentName=\"a\" props={{\"className\":\"icon icon-link\"}}></MDXTag></MDXTag>{`Operation Resolvers`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Operation resolvers implement the actual logic for resolving the operations. All the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`MappedOperation`}</MDXTag>{` implementations defined by GRelDAL are associated with corresponding default resolvers, however they can be overriden through operation mapping configuration.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"metaString\":null}}>{`Operation                                                                                                      OperationResolver\n   ^                                                                                                                          ^\n   |                                                                                                                          |\n   |_ MappedOperation                                                                          SourceAwareOperationResolver___|\n         ^                                                                                                         ^\n         |                                                                                                         |\n         |_ MappedSingleSourceOperation                                                                            |\n         |     ^                                                                                                   |\n         |     |_ MappedSingleSourceQueryOperation ------ (defaults to)->     SingleSourceQueryOperationResolver __|\n         |     |_ MappedSingleSourceInsertionOperation -- (defaults to)-> SingleSourceInsertionOperationResolver __|\n         |     |_ MappedSingleSourceUpdateOperation ----- (defaults to)->    SingleSourceUpdateOperationResolver __|\n         |     |_ MappedSingleSourceDeletionOperation --- (defaults to)->  SingleSourceDeletionOperationResolver __|\n         |                                                                                                         |\n         |_ MappedMultiSourceOperation                                                                             |\n               ^                                                                                                   |\n               |_ MappedMultiSourceUnionQueryOperation -- (defaults to)-> MultiSourceUnionQueryOperationResolver __|\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Query resolvers can also \"delegate\" through \"side-loading\" - this is a better alternative to hierarchical resolution in GraphQL that often results in N+1 query patterns because side-loading supports batch resolution and resolved results are automatically mapped and associated to parent entities.`}</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"operation-presets\"}}><MDXTag name=\"a\" components={components} parentName=\"h2\" props={{\"href\":\"#operation-presets\",\"aria-hidden\":\"true\"}}><MDXTag name=\"span\" components={components} parentName=\"a\" props={{\"className\":\"icon icon-link\"}}></MDXTag></MDXTag>{`Operation Presets`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Operation presets are pre-configured operation for common use cases (CRUD operations).`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Despite being pre-configured presets afford a great deal of flexibility because it accomodates custom transformation of mapping through interceptors.`}</MDXTag>\n<MDXTag name=\"h1\" components={components} props={{\"id\":\"operation-resolution-process\"}}><MDXTag name=\"a\" components={components} parentName=\"h1\" props={{\"href\":\"#operation-resolution-process\",\"aria-hidden\":\"true\"}}><MDXTag name=\"span\" components={components} parentName=\"a\" props={{\"className\":\"icon icon-link\"}}></MDXTag></MDXTag>{`Operation resolution process`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`GRelDAL is designed to work with graphql.js - the reference implementation of GraphQL provided by facebook.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`mapSchema`}</MDXTag>{` function constructs a graphql.js compatible schema from a collection of GRelDAL operations. Every operation has a fieldConfig getter that returns a graphql.js compatible fieldConfig. Application can associate interceptors for the fieldConfig which can transform how an operation is mapped to a query/mutation field.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Most of the GraphQL types are derived from the DataSource mapping configuration.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Resolution of a typical GraphQL Query looks something like this:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"metaString\":null}}>{`              ___\n               |                                         Parsing of GraphQL DSL\n               |                                             |\n               |                                             |\nIn graphql.js -|                                             V\n               |                                         Identify fieldConfig using query/mutation name\n               |                                             |\n               |                                             V\n               |                                         Invoke fieldConfig.resolve\n               |                                             |\n              _|_                  ___                       V\n               |                    |                    Initialize ResolverContext (1)\n               |                    |                        |\n               |                    |                        V\n               |                    |                    Locate OperationResolver implementation\n               |                 In |                        |\n               |    MappedOperation |                        V\n               |                    |                    Initialize OperationResolver with resolverContext\n               |                    |                        |\n               |                    |                        V\n               |                   -+-                   Invoke OperationResolver#resolve\n               |                    |                        |\n               |                    |                        V\n               |                    |                    Invoke dataSource methods to construct SQL query\n           In  |                In  |                        |\n      GRelDAL  | OperationResolver  |_                       V\n               |                    |                    Invoke Knex to construct SQL query\n               |                    |                        |\n               |                    |                        V\n               |                    | In                 Use configured data source connector to run SQL\n               |                    | MappedDataSource       |\n               |                    |                        |\n               |                    |                        V\n               |                    |                    Transform response to format expected in the GraphQL Query\n               |                    |                        |\n               |                    |                        V\n              _|_                  _|_                   Return response\nIn graphql.js  |                                             |\n               |                                             V\n              _|_                                        Recursively visit and validate response\n`}</MDXTag></MDXTag></MDXTag>\n  "],"mappings":";;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAzEA;;;;A","sourceRoot":""}