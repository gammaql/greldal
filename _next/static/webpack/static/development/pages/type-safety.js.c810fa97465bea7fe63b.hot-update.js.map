{"version":3,"file":"static/webpack/static\\development\\pages\\type-safety.js.c810fa97465bea7fe63b.hot-update.js","sources":["webpack:///./pages/type-safety.md"],"sourcesContent":["\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Link } from \"../components/Link\";\n\nexport default ({components, ...props}) => <MDXTag name=\"wrapper\"  components={components}>\n<MDXTag name=\"h1\" components={components} props={{\"id\":\"type-safety\"}}><MDXTag name=\"a\" components={components} parentName=\"h1\" props={{\"href\":\"#type-safety\",\"aria-hidden\":\"true\"}}><MDXTag name=\"span\" components={components} parentName=\"a\" props={{\"className\":\"icon icon-link\"}}></MDXTag></MDXTag>{`Type Safety`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`GRelDAL is written in TypeScript and comes with type definitions. However having type definitions and being type safe are two different things.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`GRelDAL attempts to balance a compromise between type-safety and ease of use. If enforcement of type-safety causes the APIs to significantly depart from\nidomatic JavaScript or TypeScript conventions we are usually willing to compromise on type-safety.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Having said that, we do make a sincere attempt to ensure that as many bugs are caught at the compile time as opposed to run time and your contributions to make this better are very much appreciated.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`In addition, if the error checking has to happen at runtime we try to fail-fast with clear error messages up-front.`}</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"runtime-type-validators\"}}><MDXTag name=\"a\" components={components} parentName=\"h2\" props={{\"href\":\"#runtime-type-validators\",\"aria-hidden\":\"true\"}}><MDXTag name=\"span\" components={components} parentName=\"a\" props={{\"className\":\"icon icon-link\"}}></MDXTag></MDXTag>{`Runtime Type Validators`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`In the introduction section, we saw that stores are defined like this:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"hljs language-ts\",\"metaString\":\"\"}}><MDXTag name=\"span\" components={components} parentName=\"code\" props={{\"className\":\"hljs-keyword\"}}>{`import`}</MDXTag>{` { types, mapDataSource } `}<MDXTag name=\"span\" components={components} parentName=\"code\" props={{\"className\":\"hljs-keyword\"}}>{`from`}</MDXTag>{` `}<MDXTag name=\"span\" components={components} parentName=\"code\" props={{\"className\":\"hljs-string\"}}>{`\"greldal\"`}</MDXTag>{`;\n\n`}<MDXTag name=\"span\" components={components} parentName=\"code\" props={{\"className\":\"hljs-keyword\"}}>{`const`}</MDXTag>{` users = mapDataSource({\n    name: `}<MDXTag name=\"span\" components={components} parentName=\"code\" props={{\"className\":\"hljs-string\"}}>{`\"User\"`}</MDXTag>{`,\n    description: `}<MDXTag name=\"span\" components={components} parentName=\"code\" props={{\"className\":\"hljs-string\"}}>{`\"users\"`}</MDXTag>{`,\n    fields: {\n        id: {\n            `}<MDXTag name=\"span\" components={components} parentName=\"code\" props={{\"className\":\"hljs-keyword\"}}>{`type`}</MDXTag>{`: types.string,\n            to: GraphQLID,\n        },\n        name: {\n            `}<MDXTag name=\"span\" components={components} parentName=\"code\" props={{\"className\":\"hljs-keyword\"}}>{`type`}</MDXTag>{`: types.string,\n        },\n    },\n});`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`The type specifications (eg. `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`types.string`}</MDXTag>{`) in the mapping above are referred to as runtime types, and they validate the type of arguments at runtime.\nThey are not implemented inside GRelDAL - rather, we use `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://github.com/gcanti/io-ts\"}}>{`io-ts`}</MDXTag>{`, an excellent library by `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://mobile.twitter.com/GiulioCanti\"}}>{`Giulio Canti`}</MDXTag>{`.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`You may wonder that given GraphQL already does validation of types at boundaries, why bother with this at all.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`There are two reasons:`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">\n<MDXTag name=\"p\" components={components} parentName=\"li\">{`We can extract out static types from these runtime types. This enables us to write type-safe code, when using TypeScript, without ever having to define any additional types. We can simply derive the types of the entities from the data source mapping itself and if you use incorrect fields or arguments, your code will fail to compile.`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">\n<MDXTag name=\"p\" components={components} parentName=\"li\">{`Runtime types are composable and support `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://github.com/gcanti/io-ts#refinements\"}}>{`refinements`}</MDXTag>{`, so you can embed generic validation logic in the runtime types and share them across field mappings & argument mappings across multiple stores and operations.`}</MDXTag>\n</MDXTag>\n</MDXTag>\n<MDXTag name=\"p\" components={components}>{`We not only extract static types from runtime types, we also derive GraphQL types from them - so you have to specify only the runtime types for most cases.\nIn some cases automatic type derivations are not possible and you may need to specify the GraphQL types separately - as is the case with `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`GraphQLID`}</MDXTag>{` in the snippet above.\nThe inferred GraphQL type would have been `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`GraphQLString`}</MDXTag>{` but because we have specified `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`GraphQLID`}</MDXTag>{` it would take precedence.`}</MDXTag></MDXTag>\n  "],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAtCA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}