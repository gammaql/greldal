<!DOCTYPE html><html lang="id"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="apple-touch-icon" sizes="57x57" href="/greldal/static/favicons/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/greldal/static/favicons/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/greldal/static/favicons/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/greldal/static/favicons/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/greldal/static/favicons/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/greldal/static/favicons/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/greldal/static/favicons/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/greldal/static/favicons/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/greldal/static/favicons/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/greldal/static/favicons/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/greldal/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/greldal/static/favicons/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/greldal/static/favicons/favicon-16x16.png"/><meta name="msapplication-TileColor" content="#E535AB"/><meta name="msapplication-TileImage" content="/greldal/static/favicons/ms-icon-144x144.png"/><meta name="theme-color" content="#E535AB"/><style data-styled="" data-styled-version="5.1.0">.kkVBdj{cursor:pointer;background:black;padding:5px;text-transform:uppercase;border-radius:4px;margin:1.6rem 0;color:white !important;}/*!sc*/
data-styled.g1[id="Link__Anchor-sc-1hbrjrd-0"]{content:"kkVBdj,"}/*!sc*/
.dCMmPM{margin-right:5px;float:right;margin-left:10px;padding-left:5px;border-left:1px solid white;}/*!sc*/
data-styled.g3[id="Link___StyledTrailingIcon-sc-1hbrjrd-2"]{content:"dCMmPM,"}/*!sc*/
.dJUrsX{float:left;background:gray;margin:-5px;padding:5px 10px;border-radius:4px 0 0 4px;margin-right:5px;}/*!sc*/
data-styled.g4[id="Link___StyledDiv-sc-1hbrjrd-3"]{content:"dJUrsX,"}/*!sc*/
</style><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/greldal/_next/static/css/styles.3f31de7e.chunk.css" as="style"/><link rel="stylesheet" href="/greldal/_next/static/css/styles.3f31de7e.chunk.css"/><link rel="preload" href="/greldal/_next/static/lpglMTbhI7ggGpTTBL7SE/pages/subscriptions.js" as="script"/><link rel="preload" href="/greldal/_next/static/lpglMTbhI7ggGpTTBL7SE/pages/_app.js" as="script"/><link rel="preload" href="/greldal/_next/static/runtime/webpack-87eff0b30634ffd1130f.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/framework.92bd6b81c7da20fc6c75.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/2edb282b.370272d698b8c8d41792.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/7e89b4665ebfb4e2abee2bef71a05dfe376a77b6.3a91582121712f3411ed.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/4ebced11ac36390013b50dcef1fd591cb340c7b5.fd8c4f31fe61facb6f72.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/02abb9f2192c059886bd6ee9226145a49ec8715a.1dda0faff8ebe31b997c.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/29306ec1e1eec19b653e3c2aaf5a2c2962a91283.e86b241b0a1b5328fa70.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/a2c33cfc241765541f359ae2ec975d0be50f699b.77315c05aa506cacb3cc.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/7544df931d66d9af443d9fb326c8ce2e935a04f4.a6811910484b213cdf8d.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/styles.87da95fba9c273dcf072.js" as="script"/><link rel="preload" href="/greldal/_next/static/runtime/main-1550f615cb6b2e6d8e09.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/036b8216dd67783cdf1ce824d45a08631a525868.692a5fc571ad36f82720.js" as="script"/></head><body class="custom_class"><div id="__next"><div style="display:none"><div class="Sidebar__SidebarContainer-sc-1bydltt-0 Sidebar__FixedSidebarContainer-sc-1bydltt-1 fSRNVE"><div style="padding-bottom:10px;display:flex;flex-direction:row;cursor:pointer"><img src="/greldal/_next/static/images/d3212937ee582435973cbc81840d0e66.png" style="height:50px;width:50px"/><div style="font-weight:600;font-size:2rem;line-height:50px;padding-left:10px;color:#8dd35f">GRelDAL<span class="LibInfoBanner___StyledSpan-jtu4hg-0 hRspAa">Beta</span></div></div><a class="Link__Anchor-sc-1hbrjrd-0 kkVBdj"><div class="Link__TrailingIcon-sc-1hbrjrd-1 etAccT">→</div>API</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Quick Start</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Playground</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Frequently Asked Questions</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><h1 class="Sidebar__SectionHeader-sc-1bydltt-2 bJPDhy">Guides</h1></a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Mapping Data Sources</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Mapping Operations</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Mapping Associations</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Stored Procedures</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Subscriptions</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Best Practices</a><h1 class="Sidebar__SectionHeader-sc-1bydltt-2 bJPDhy">Additional Topics</h1><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Type Safety</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Comparision With Alternatives</a><a class="Link__Anchor-sc-1hbrjrd-0 iTeElz"><span class="Sidebar__Bolt-sc-1bydltt-3 eJkLzs">⚡</span>Architecture Overview</a></div><div id="container" class="PageLayout__ContentContainer-ct4rbe-5 PageLayout__DesktopContentContainer-ct4rbe-6 LwAci"><div><h1 id="subscriptions"><a href="#subscriptions" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Subscriptions</h1><p>It is easy to use <a href="https://github.com/apollographql/graphql-subscriptions">graphql-subscriptions</a> alongside GRelDAL to support real-time subscriptions.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8"><code><span style="color:#333;font-weight:bold">import</span> { PubSub } <span style="color:#333;font-weight:bold">from</span> <span style="color:#d14">&quot;graphql-subscriptions&quot;</span>;
<span style="color:#333;font-weight:bold">const</span> pubsub = <span style="color:#333;font-weight:bold">new</span> PubSub();

        <span style="color:#998;font-style:italic">// Globally configure notification dispatcher</span>
        <span style="color:#998;font-style:italic">// once to specify how it should publish notifications</span>
        NotificationDispatcher.configure({
            <span class="hljs-attr">publish</span>: <span class="hljs-function">(<span class="hljs-params">payload: NotificationDispatcher.MutationNotification</span>) =&gt;</span> {
                pubsub.publish(<span style="color:#d14">&quot;MUTATIONS&quot;</span>, payload);
            },
        });
        <span style="color:#333;font-weight:bold">let</span>
        schema = mapSchema([
            operationPresets.findOneOperation(users),
            operationPresets.insertOneOperation(users),

            <span style="color:#998;font-style:italic">// We define a subscription operation</span>
            <span style="color:#998;font-style:italic">// which can listen to this channel</span>
            {
                <span class="hljs-attr">operationType</span>: OperationTypes.Subscription,
                <span class="hljs-attr">name</span>: <span style="color:#d14">&quot;userInserted&quot;</span>,
                <span class="hljs-attr">fieldConfig</span>: {
                    <span class="hljs-attr">type</span>: GraphQLList(
                        <span style="color:#333;font-weight:bold">new</span> GraphQLObjectType({
                            <span class="hljs-attr">name</span>: <span style="color:#d14">&quot;UserInsertionNotification&quot;</span>,
                            <span class="hljs-attr">fields</span>: {
                                <span class="hljs-attr">id</span>: {
                                    <span class="hljs-attr">type</span>: GraphQLID,
                                },
                            },
                        }),
                    ),
                    <span class="hljs-attr">resolve</span>: <span class="hljs-function">(<span class="hljs-params">payload: NotificationDispatcher.MutationNotification</span>) =&gt;</span> payload.entities.User,
                    <span class="hljs-attr">subscribe</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> pubsub.asyncIterator(<span style="color:#d14">&quot;MUTATIONS&quot;</span>),
                },
            },
        ]);</code></pre><p>NotificationDispatcher facilitates adding interceptors which can receive mutation events and add additional metadata to them, add additional mutation events to be published in same batch or prevent certain mutation events from being dispatched. </p><h2 id="notifying-about-associated-data-sources"><a href="#notifying-about-associated-data-sources" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Notifying about associated data sources</h2><p>A common use case is that from an application perspective certain entities can be thought of as belonging to other entities.
So in that case, we would want to trigger mutation events for one or more associated entities when an entitiy is mutated.</p><p>For example, if a Comment entity is inserted, then we may want to notify that a Post has been updated. </p><p>Common pattern for this is that in an operation interceptor we can trigger other operations (eg. queries to identify associated models) and trigger additional mutation events for them.</p><h2 id="notifications-from-outside-greldal"><a href="#notifications-from-outside-greldal" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Notifications from outside GRelDAL</h2><p>Notifications don&#x27;t have to originate from inside GRelDAL or even GraphQL operations. It is straightforward to directly use <code>NotificationDispatcher</code> and dispatch notifications from anywhere in your application code eg. background jobs, command line scripts etc.</p><pre><code class="hljs language-ts" metaString="">NotificationDispatcher.dispatch({
    <span class="hljs-comment">// Type is commonly used to distinguish between notifications</span>
    <span class="hljs-comment">// in the interceptors</span>
    <span class="hljs-keyword">type</span>: <span class="hljs-string">&quot;OrderDispatchCompletion&quot;</span>,

    <span class="hljs-comment">// (Optional) List of entities which were affected by the change</span>
    <span class="hljs-comment">// that caused this notification</span>
    entities: [
        {id: <span class="hljs-number">10</span>, name: <span class="hljs-string">&quot;Key&quot;</span>},
        {id: <span class="hljs-number">11</span>, name: <span class="hljs-string">&quot;KeyChain&quot;</span>}
    ],

    <span class="hljs-comment">// Application specific metadata attached to this notification</span>
    metadata: {
        priority: <span class="hljs-number">1</span>
    }
});</code></pre><a class="Link__Anchor-sc-1hbrjrd-0 kkVBdj" style="display:inline-block;cursor:pointer"><div class="Link__TrailingIcon-sc-1hbrjrd-1 Link___StyledTrailingIcon-sc-1hbrjrd-2 dCMmPM">⯈</div><div class="Link___StyledDiv-sc-1hbrjrd-3 dJUrsX">Next</div> <strong>Best Practices</strong></a></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/subscriptions","query":{},"buildId":"lpglMTbhI7ggGpTTBL7SE","assetPrefix":"/greldal","nextExport":true,"isFallback":false,"appGip":true}</script><script nomodule="" src="/greldal/_next/static/runtime/polyfills-2b357385e9a0bfe15896.js"></script><script async="" data-next-page="/subscriptions" src="/greldal/_next/static/lpglMTbhI7ggGpTTBL7SE/pages/subscriptions.js"></script><script async="" data-next-page="/_app" src="/greldal/_next/static/lpglMTbhI7ggGpTTBL7SE/pages/_app.js"></script><script src="/greldal/_next/static/runtime/webpack-87eff0b30634ffd1130f.js" async=""></script><script src="/greldal/_next/static/chunks/framework.92bd6b81c7da20fc6c75.js" async=""></script><script src="/greldal/_next/static/chunks/2edb282b.370272d698b8c8d41792.js" async=""></script><script src="/greldal/_next/static/chunks/7e89b4665ebfb4e2abee2bef71a05dfe376a77b6.3a91582121712f3411ed.js" async=""></script><script src="/greldal/_next/static/chunks/4ebced11ac36390013b50dcef1fd591cb340c7b5.fd8c4f31fe61facb6f72.js" async=""></script><script src="/greldal/_next/static/chunks/02abb9f2192c059886bd6ee9226145a49ec8715a.1dda0faff8ebe31b997c.js" async=""></script><script src="/greldal/_next/static/chunks/29306ec1e1eec19b653e3c2aaf5a2c2962a91283.e86b241b0a1b5328fa70.js" async=""></script><script src="/greldal/_next/static/chunks/a2c33cfc241765541f359ae2ec975d0be50f699b.77315c05aa506cacb3cc.js" async=""></script><script src="/greldal/_next/static/chunks/7544df931d66d9af443d9fb326c8ce2e935a04f4.a6811910484b213cdf8d.js" async=""></script><script src="/greldal/_next/static/chunks/styles.87da95fba9c273dcf072.js" async=""></script><script src="/greldal/_next/static/runtime/main-1550f615cb6b2e6d8e09.js" async=""></script><script src="/greldal/_next/static/chunks/036b8216dd67783cdf1ce824d45a08631a525868.692a5fc571ad36f82720.js" async=""></script><script src="/greldal/_next/static/lpglMTbhI7ggGpTTBL7SE/_buildManifest.js" async=""></script><script src="/greldal/_next/static/lpglMTbhI7ggGpTTBL7SE/_ssgManifest.js" async=""></script></body></html>