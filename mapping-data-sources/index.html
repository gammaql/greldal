<!DOCTYPE html><html lang="id"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="apple-touch-icon" sizes="57x57" href="/greldal/static/favicons/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/greldal/static/favicons/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/greldal/static/favicons/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/greldal/static/favicons/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/greldal/static/favicons/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/greldal/static/favicons/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/greldal/static/favicons/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/greldal/static/favicons/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/greldal/static/favicons/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/greldal/static/favicons/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/greldal/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/greldal/static/favicons/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/greldal/static/favicons/favicon-16x16.png"/><meta name="msapplication-TileColor" content="#E535AB"/><meta name="msapplication-TileImage" content="/greldal/static/favicons/ms-icon-144x144.png"/><meta name="theme-color" content="#E535AB"/><style data-styled="ehiHiI dRinVF jIsvFx fqzCbS cpbcGU fbiqeh dtTHBq jmeHLi bQgUGn ZScnH" data-styled-version="4.3.1">
/* sc-component-id: Link__Anchor-sc-1hbrjrd-0 */
.jIsvFx{cursor:pointer;background:black;padding:5px;text-transform:uppercase;border-radius:4px;margin:1.6rem 0;color:white !important;}.fqzCbS{cursor:pointer;}
/* sc-component-id: Link__TrailingIcon-sc-1hbrjrd-1 */
.cpbcGU{margin-right:5px;float:right;}
/* sc-component-id: sc-bdVaJa */
.bQgUGn{margin-right:5px;float:right;margin-left:10px;padding-left:5px;border-left:1px solid white;}
/* sc-component-id: sc-bwzfXH */
.ZScnH{float:left;background:gray;margin:-5px;padding:5px 10px;border-radius:4px 0 0 4px;margin-right:5px;}
/* sc-component-id: sc-htpNat */
.dRinVF{font-size:0.8rem;font-weight:100;color:orange;background:lemonchiffon;padding:4px;border-radius:4px;border:1px solid orange;position:relative;top:-20px;}
/* sc-component-id: Sidebar__FixedSidebarContainer-sc-1bydltt-1 */
.ehiHiI{background:#fff;padding:10px 30px 30px 30px;position:fixed;top:0;left:0;bottom:0;width:300px;overflow-y:auto;overflow-x:auto;border-right:1px solid #bbb;box-shadow:0 0 20px #ccc;border-top:4px solid #8dd35f;} .ehiHiI a,.ehiHiI a:visited{display:block;color:#000;font-weight:700;margin-top:5px;-webkit-text-decoration:none;text-decoration:none;} .ehiHiI h1,.ehiHiI h2,.ehiHiI h3,.ehiHiI h4,.ehiHiI h5,.ehiHiI h6{font-size:0.75rem !important;font-weight:600;}
/* sc-component-id: Sidebar__SectionHeader-sc-1bydltt-2 */
.dtTHBq{background:#dee9d8;padding:5px 10px;text-transform:uppercase;border-radius:4px;color:gray;font-size:0.75rem;margin:1.6rem 0;}
/* sc-component-id: Sidebar__Bolt-sc-1bydltt-3 */
.fbiqeh{margin-right:5px;}
/* sc-component-id: PageLayout__DesktopContentContainer-ct4rbe-6 */
.jmeHLi{max-width:700px;margin:40px 100px 50px 400px;} .jmeHLi pre:not(.CodeMirror-line){padding:0 !important;} .jmeHLi h1{margin:2.8rem 0;} .jmeHLi h2,.jmeHLi h3,.jmeHLi h4,.jmeHLi h5,.jmeHLi h6{margin:1.8rem 0;} .jmeHLi p,.jmeHLi ol,.jmeHLi ul{margin:1.8rem 0;} .jmeHLi pre:not(.CodeMirror-line) > code{border-left:4px solid #ddd;display:block;margin:0;padding:5px;} .jmeHLi pre:not(.CodeMirror-line){max-width:calc(100% - 40px);overflow-x:auto;border:1px solid #ddd;background:#f8f8f8;} .jmeHLi a,.jmeHLi a:visited,.jmeHLi a:hover,.jmeHLi a:active{color:#0261cd;font-weight:bold;-webkit-text-decoration:none;text-decoration:none;}</style><meta charSet="utf-8" class="next-head"/><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" class="next-head"/><link rel="preload" href="/greldal/_next/static/m9Gt_ITmS_IvcaSe2Cu05/pages/mapping-data-sources.js" as="script"/><link rel="preload" href="/greldal/_next/static/m9Gt_ITmS_IvcaSe2Cu05/pages/_app.js" as="script"/><link rel="preload" href="/greldal/_next/static/runtime/webpack-649ae09e256b1a7a32e6.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/commons.f097981412ad5809a9ee.js" as="script"/><link rel="preload" href="/greldal/_next/static/runtime/main-7eb36460353cccf87fef.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/styles.c8593acf3e2dbd0d3e25.js" as="script"/><link rel="stylesheet" href="/greldal/_next/static/css/styles.9bca3e08.chunk.css"/></head><body class="custom_class"><div id="__next"><div style="display:none"><div class="Sidebar__SidebarContainer-sc-1bydltt-0 Sidebar__FixedSidebarContainer-sc-1bydltt-1 ehiHiI"><div style="padding-bottom:10px;display:flex;flex-direction:row;cursor:pointer"><img src="/greldal/_next/static/images/6f91cdba06813c05d0b3e558d9f749be.png" style="height:50px;width:50px"/><div style="font-weight:600;font-size:2rem;line-height:50px;padding-left:10px;color:#8dd35f">GRelDAL<span class="sc-htpNat dRinVF">Beta</span></div></div><a class="Link__Anchor-sc-1hbrjrd-0 jIsvFx"><div class="Link__TrailingIcon-sc-1hbrjrd-1 cpbcGU">⯈</div>API</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Quick Start</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Playground (New)</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Frequently Asked Questions</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><h1 class="Sidebar__SectionHeader-sc-1bydltt-2 dtTHBq">Guides</h1></a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Mapping Data Sources</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Mapping Operations</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Mapping Associations</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Subscriptions</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Best Practices</a><h1 class="Sidebar__SectionHeader-sc-1bydltt-2 dtTHBq">Additional Topics</h1><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Type Safety</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Comparision With Alternatives</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-3 fbiqeh">⚡</span>Architecture Overview</a></div><div id="container" class="PageLayout__ContentContainer-ct4rbe-5 PageLayout__DesktopContentContainer-ct4rbe-6 jmeHLi"><div><h1 id="mapping-data-sources"><a href="#mapping-data-sources" aria-hidden="true"><span class="icon icon-link"></span></a>Mapping Data Sources</h1><p>Creation of a GraphQL API using GRelDAL essentially involves defining operations on data sources.</p><p>Operations are what we expose to the outside world through GraphQL queries and mutations and these operations interact with the data stored in our databases through data sources. These data sources are usually backed by tables, but they can also be backed by views, materialized views, joined tables, etc.</p><p>We can use the mapSource function to map a datasource:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8"><code><span style="color:#333;font-weight:bold">import</span> {mapDataSource, mapFields, types} <span style="color:#333;font-weight:bold">from</span> <span style="color:#d14">&quot;greldal&quot;</span>;

<span style="color:#333;font-weight:bold">const</span> users = mapDataSource({
    <span class="hljs-attr">name</span>: <span style="color:#d14">&quot;User&quot;</span>,
    <span class="hljs-attr">fields</span>: mapFields({
        <span class="hljs-attr">id</span>: {
            <span class="hljs-attr">type</span>: types.number,
            <span class="hljs-attr">to</span>: GraphQLID,
            <span class="hljs-attr">isPrimary</span>: <span style="color:#008080">true</span>,
        },
        <span class="hljs-attr">name</span>: {
            <span class="hljs-attr">type</span>: types.string,
        },
        <span class="hljs-attr">age</span>: {
            <span class="hljs-attr">type</span>: types.integer,
        },
    }),
});</code></pre><p>As we have already covered in the <a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">Quick Start</a> the above configuration tells GRelDAL that we want to map the <code>users</code> table (pluralized from <code>User</code>) to a <code>User</code> data source, and this data source will have two fields: id, name.</p><p>GRelDAL&#x27;s focus on convention over configuration reduces quite a bit of boilerplate from what would otherwise have been a more verbose mapping:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8"><code><span style="color:#333;font-weight:bold">import</span> {mapDataSource, mapFields, types} <span style="color:#333;font-weight:bold">from</span> <span style="color:#d14">&quot;greldal&quot;</span>;

<span style="color:#333;font-weight:bold">const</span> users = mapDataSource({
    <span class="hljs-attr">name</span>: {
        <span class="hljs-attr">mapped</span>: <span style="color:#d14">&quot;User&quot;</span>,
        <span class="hljs-attr">stored</span>: <span style="color:#d14">&quot;users&quot;</span>,
    },
    <span class="hljs-attr">fields</span>: mapFields({
        <span class="hljs-attr">id</span>: {
            <span class="hljs-attr">sourceColumn</span>: <span style="color:#d14">&quot;id&quot;</span>,
            <span class="hljs-attr">type</span>: types.string,
            <span class="hljs-attr">to</span>: {
                <span class="hljs-attr">input</span>: GraphQLID,
                <span class="hljs-attr">output</span>: GraphQLID,
            },
        },
        <span class="hljs-attr">name</span>: {
            <span class="hljs-attr">sourceColumn</span>: <span style="color:#d14">&quot;name&quot;</span>,
            <span class="hljs-attr">type</span>: types.string,
            <span class="hljs-attr">to</span>: {
                <span class="hljs-attr">input</span>: GraphQLString,
                <span class="hljs-attr">output</span>: GraphQLString,
            },
        },
        <span class="hljs-attr">age</span>: {
            <span class="hljs-attr">sourceColumn</span>: <span style="color:#d14">&quot;age&quot;</span>,
            <span class="hljs-attr">type</span>: types.integer,
            <span class="hljs-attr">to</span>: {
                <span class="hljs-attr">input</span>: GraphQLInt,
                <span class="hljs-attr">output</span>: GraphQLInt,
            },
        },
    }),
});</code></pre><h2 id="type-specifications"><a href="#type-specifications" aria-hidden="true"><span class="icon icon-link"></span></a>Type specifications</h2><p>Note that for every field we had to specify a type. This type was specified through what we call runtime-types. The section on <a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">Type Safety</a>
goes into more on detail on this, but essentially for all primitives we have corresponding runtime types:</p><table><tr><td>string</td><td>types.string</td></tr><tr><td>integer</td><td>types.integer</td></tr><tr><td>number</td><td>types.number</td></tr><tr><td>boolean</td><td>types.boolean</td></tr></table><p>Some GraphQL types have no equivalent typescript type (eg. GraphQLInt, GraphQLID) and for them we can specifically mention the input and output types.
In case both are same (<code>{to: {input: GraphQLID, output: GraphQLID}}</code>) can can just specify them once (<code>{to: GraphQLID}</code>).</p><p>We can compose these types to build composite types:</p><pre><code>const addresses = types.array([
    types.type({
        street: types.string,
        plot_no: types.number
    })
])
</code></pre><p>Refer to the documentation of io-ts (which we simply re-export as types) for more details around using and defining runtime types.</p><h2 id="computed-fields"><a href="#computed-fields" aria-hidden="true"><span class="icon icon-link"></span></a>Computed fields</h2><p>Fields don&#x27;t necessarily have to map to columns one-to-one.</p><p>We can have computed fields which depend on other column-based fields and are computed on the fly:</p><pre><code>fields: {
    fullName: {
        dependencies: [&quot;firstName&quot;, &quot;lastName&quot;],
        derive: ({firstName, lastName}) =&gt; `${firstName} ${lastName}`,
        to: types.string
    }
}
</code></pre><h2 id="associations"><a href="#associations" aria-hidden="true"><span class="icon icon-link"></span></a>Associations</h2><p>GRelDAL supports linking together data sources through associations and performing operations that span across multiple data sources.</p><p>The section on <a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">association mapping</a> will cover this in more detail.</p><a class="Link__Anchor-sc-1hbrjrd-0 jIsvFx" style="display:inline-block;cursor:pointer"><div class="Link__TrailingIcon-sc-1hbrjrd-1 sc-bdVaJa bQgUGn">⯈</div><div class="sc-bwzfXH ZScnH">Next</div> <strong>Mapping Operations</strong></a></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{}},"page":"/mapping-data-sources","query":{},"buildId":"m9Gt_ITmS_IvcaSe2Cu05","dynamicBuildId":false,"assetPrefix":"/greldal","nextExport":true}</script><script async="" id="__NEXT_PAGE__/mapping-data-sources" src="/greldal/_next/static/m9Gt_ITmS_IvcaSe2Cu05/pages/mapping-data-sources.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/greldal/_next/static/m9Gt_ITmS_IvcaSe2Cu05/pages/_app.js"></script><script src="/greldal/_next/static/runtime/webpack-649ae09e256b1a7a32e6.js" async=""></script><script src="/greldal/_next/static/chunks/commons.f097981412ad5809a9ee.js" async=""></script><script src="/greldal/_next/static/runtime/main-7eb36460353cccf87fef.js" async=""></script><script src="/greldal/_next/static/chunks/styles.c8593acf3e2dbd0d3e25.js" async=""></script></body></html>