<!DOCTYPE html><html lang="id"><head><meta charSet="utf-8" class="next-head"/><link rel="preload" href="/greldal/_next/static/2YccF_ECHR5O_CVn9HK9n/pages/mapping-data-sources.js" as="script"/><link rel="preload" href="/greldal/_next/static/2YccF_ECHR5O_CVn9HK9n/pages/_app.js" as="script"/><link rel="preload" href="/greldal/_next/static/2YccF_ECHR5O_CVn9HK9n/pages/_error.js" as="script"/><link rel="preload" href="/greldal/_next/static/runtime/webpack-1831ee303495fbc2dd7e.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/commons.54c16361ade95524e049.js" as="script"/><link rel="preload" href="/greldal/_next/static/runtime/main-cb09467104b7e28e3da4.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/styles.afa417f734aadb5c9fce.js" as="script"/><link rel="stylesheet" href="/greldal/_next/static/css/styles.d95fa3d7.chunk.css"/><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="apple-touch-icon" sizes="57x57" href="../static/favicons/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="../static/favicons/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="../static/favicons/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="../static/favicons/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="../static/favicons/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="../static/favicons/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="../static/favicons/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="../static/favicons/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="../static/favicons/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="../static/favicons/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="../static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="../static/favicons/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="../static/favicons/favicon-16x16.png"/><meta name="msapplication-TileColor" content="#E535AB"/><meta name="msapplication-TileImage" content="../static/favicons/ms-icon-144x144.png"/><meta name="theme-color" content="#E535AB"/><style data-styled="iXHZSB dRinVF iaxAMg fqzCbS cpbcGU iuVhHv gOousH bQgUGn ZScnH" data-styled-version="4.1.3">
/* sc-component-id: Link__Anchor-sc-1hbrjrd-0 */
.iaxAMg{cursor:pointer;background:black;padding:5px;text-transform:uppercase;border-radius:4px;color:white !important;}.fqzCbS{cursor:pointer;}
/* sc-component-id: Link__TrailingIcon-sc-1hbrjrd-1 */
.cpbcGU{margin-right:5px;float:right;}
/* sc-component-id: sc-bdVaJa */
.bQgUGn{margin-right:5px;float:right;margin-left:10px;padding-left:5px;border-left:1px solid white;}
/* sc-component-id: sc-bwzfXH */
.ZScnH{float:left;background:gray;margin:-5px;padding:5px 10px;border-radius:4px 0 0 4px;margin-right:5px;}
/* sc-component-id: sc-htpNat */
.dRinVF{font-size:0.8rem;font-weight:100;color:orange;background:lemonchiffon;padding:4px;border-radius:4px;border:1px solid orange;position:relative;top:-20px;}
/* sc-component-id: Sidebar__Container-sc-1bydltt-0 */
.iXHZSB{background:#fff;position:fixed;top:0;left:0;bottom:0;width:300px;overflow-y:auto;overflow-x:auto;padding:10px 30px 30px 30px;border-right:1px solid #bbb;box-shadow:0 0 20px #ccc;} .iXHZSB a,.iXHZSB a:visited{display:block;color:#000;font-weight:700;margin-top:5px;-webkit-text-decoration:none;text-decoration:none;} .iXHZSB h1,.iXHZSB h2,.iXHZSB h3,.iXHZSB h4,.iXHZSB h5,.iXHZSB h6{font-size:0.75rem !important;font-weight:600;}
/* sc-component-id: Sidebar__SectionHeader-sc-1bydltt-1 */
.iuVhHv{background:#ddd;padding:5px;text-transform:uppercase;border-radius:4px;color:gray;font-size:0.75rem;}
/* sc-component-id: PageLayout__Container-ct4rbe-0 */
.gOousH{max-width:700px;margin:40px 100px 50px 400px;} .gOousH pre > code{border:1px solid #ddd;border-left:4px solid #ddd;display:block;background:#f8f8f8;padding:0.5em;} .gOousH a,.gOousH a:visited,.gOousH a:hover,.gOousH a:active{color:#0261cd;font-weight:bold;-webkit-text-decoration:none;text-decoration:none;}</style></head><body class="custom_class"><div id="__next"><div data-reactroot=""><div class="Sidebar__Container-sc-1bydltt-0 iXHZSB"><div style="padding-bottom:10px;display:flex;flex-direction:row;cursor:pointer"><img src="/greldal/_next/static/images/81342499647d5509de6dd828ff74969e.png" style="height:50px"/><div style="font-weight:600;font-size:2rem;line-height:50px;padding-left:10px;color:#e535ab">GRelDAL<span class="sc-htpNat dRinVF">Beta</span></div></div><a class="Link__Anchor-sc-1hbrjrd-0 iaxAMg"><div class="Link__TrailingIcon-sc-1hbrjrd-1 cpbcGU">⯈</div>API</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">⚡ Quick Start</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><h1 class="Sidebar__SectionHeader-sc-1bydltt-1 iuVhHv">Guides</h1></a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">⚡ Mapping Data Sources</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">⚡ Mapping Operations</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">⚡ Mapping Associations</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">⚡ Best Practices</a><h1 class="Sidebar__SectionHeader-sc-1bydltt-1 iuVhHv">Additional Topics</h1><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">⚡ Type Safety</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">⚡ Comparision With Alternatives</a></div><div id="container" class="PageLayout__Container-ct4rbe-0 gOousH"><div><h1 id="mapping-data-sources"><a href="#mapping-data-sources" aria-hidden="true"><span class="icon icon-link"></span></a>Mapping Data Sources</h1><p>Creation of a GraphQL API using GRelDAL essentially involves defining operations on data sources.</p><p>Operations are what we expose to the outside world through GraphQL queries and mutations and these operations interact with the data stored in our databases through data sources. These data sources are usually backed by tables, but they can also be backed by views, materialized views, joined tables, etc.</p><p>We can use the mapSource function to map a datasource:</p><pre><code class="hljs language-ts" metaString=""><span class="hljs-keyword">const</span> users = mapDataSource({
    name: <span class="hljs-string">&quot;User&quot;</span>,
    fields: {
        id: {
            <span class="hljs-keyword">type</span>: types.number,
            to: GraphQLID,
        },
        name: {
            <span class="hljs-keyword">type</span>: types.string,
        },
    },
});</code></pre><p>As we have already covered in the <a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">Quick Start</a> the above configuration tells GRelDAL that we want to map the <code>users</code> table (pluralized from <code>User</code>) to a <code>User</code> data source, and this data source will have two fields: id, name.</p><p>GRelDAL&#x27;s focus on convention over configuration reduces quite a bit of boilerplate from what would otherwise have been a more verbose mapping:</p><pre><code class="hljs language-ts" metaString=""><span class="hljs-keyword">const</span> users = mapDataSource({
    name: {
        mapped: <span class="hljs-string">&quot;User&quot;</span>,
        stored: <span class="hljs-string">&quot;users&quot;</span>,
    },
    fields: {
        id: {
            sourceColumn: <span class="hljs-string">&quot;id&quot;</span>,
            <span class="hljs-keyword">type</span>: types.string,
            to: {
                input: GraphQLID,
                output: GraphQLID,
            },
        },
        name: {
            sourceColumn: <span class="hljs-string">&quot;name&quot;</span>,
            <span class="hljs-keyword">type</span>: types.string,
            to: {
                input: GraphQLString,
                output: GraphQLString,
            },
        },
    },
});</code></pre><h2 id="type-specifications"><a href="#type-specifications" aria-hidden="true"><span class="icon icon-link"></span></a>Type specifications</h2><p>Note that for every field we had to specify a type. This type was specified through what we call runtime-types. The section on <a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">Type Safety</a>
goes into more on detail on this, but essentially for all primitives we have corresponding runtime types:</p><p>| string  | types.string  |
| number  | types.number  |
| boolean | types.boolean |</p><p>Some GraphQL types have no equivalent typescript type (eg. GraphQLInt, GraphQLID) and for them we can specifically mention the input and output types.
In case both are same (<code>{to: {input: GraphQLID, output: GraphQLID}}</code>) can can just specify them once (<code>{to: GraphQLID}</code>).</p><p>We can compose these types to build composite types:</p><pre><code>const addresses = types.array([
    types.type({
        street: types.string,
        plot_no: types.number
    })
])
</code></pre><p>Refer to the documentation of io-ts (which we simply re-export as types) for more details around using and defining runtime types.</p><h2 id="computed-fields"><a href="#computed-fields" aria-hidden="true"><span class="icon icon-link"></span></a>Computed fields</h2><p>Fields don&#x27;t necessarily have to map to columns one-to-one.</p><p>We can have computed fields which depend on other column-based fields and are computed on the fly:</p><pre><code>fields: {
    fullName: {
        dependencies: [&quot;firstName&quot;, &quot;lastName&quot;],
        derive: (firstName, lastName) =&gt; `${firstName} ${lastName}`,
        to: types.string
    }
}
</code></pre><h2 id="associations"><a href="#associations" aria-hidden="true"><span class="icon icon-link"></span></a>Associations</h2><p>GRelDAL supports linking together data sources through associations and performing operations that span across multiple data sources.</p><p>The section on <a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS">association mapping</a> will cover this in more detail.</p><a class="Link__Anchor-sc-1hbrjrd-0 iaxAMg" style="display:inline-block;cursor:pointer"><div class="Link__TrailingIcon-sc-1hbrjrd-1 sc-bdVaJa bQgUGn">⯈</div><div class="sc-bwzfXH ZScnH">Next</div> <strong>Mapping Operations</strong></a></div></div></div></div><script>__NEXT_DATA__ = {"props":{"pageProps":{}},"page":"/mapping-data-sources","query":{},"buildId":"2YccF_ECHR5O_CVn9HK9n","nextExport":true};__NEXT_LOADED_PAGES__=[];__NEXT_REGISTER_PAGE=function(r,f){__NEXT_LOADED_PAGES__.push([r, f])}</script><script async="" id="__NEXT_PAGE__/mapping-data-sources" src="/greldal/_next/static/2YccF_ECHR5O_CVn9HK9n/pages/mapping-data-sources.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/greldal/_next/static/2YccF_ECHR5O_CVn9HK9n/pages/_app.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/greldal/_next/static/2YccF_ECHR5O_CVn9HK9n/pages/_error.js"></script><script src="/greldal/_next/static/runtime/webpack-1831ee303495fbc2dd7e.js" async=""></script><script src="/greldal/_next/static/chunks/commons.54c16361ade95524e049.js" async=""></script><script src="/greldal/_next/static/runtime/main-cb09467104b7e28e3da4.js" async=""></script><script src="/greldal/_next/static/chunks/styles.afa417f734aadb5c9fce.js" async=""></script></body></html>