<!DOCTYPE html><html lang="id"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="apple-touch-icon" sizes="57x57" href="/greldal/static/favicons/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/greldal/static/favicons/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/greldal/static/favicons/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/greldal/static/favicons/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/greldal/static/favicons/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/greldal/static/favicons/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/greldal/static/favicons/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/greldal/static/favicons/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/greldal/static/favicons/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/greldal/static/favicons/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/greldal/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/greldal/static/favicons/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/greldal/static/favicons/favicon-16x16.png"/><meta name="msapplication-TileColor" content="#E535AB"/><meta name="msapplication-TileImage" content="/greldal/static/favicons/ms-icon-144x144.png"/><meta name="theme-color" content="#E535AB"/><style data-styled="iXHZSB dRinVF jIsvFx fqzCbS cpbcGU jlBhCp eJYOZc bCcHiI" data-styled-version="4.1.3">
/* sc-component-id: Link__Anchor-sc-1hbrjrd-0 */
.jIsvFx{cursor:pointer;background:black;padding:5px;text-transform:uppercase;border-radius:4px;margin:1.6rem 0;color:white !important;}.fqzCbS{cursor:pointer;}
/* sc-component-id: Link__TrailingIcon-sc-1hbrjrd-1 */
.cpbcGU{margin-right:5px;float:right;}
/* sc-component-id: sc-htpNat */
.dRinVF{font-size:0.8rem;font-weight:100;color:orange;background:lemonchiffon;padding:4px;border-radius:4px;border:1px solid orange;position:relative;top:-20px;}
/* sc-component-id: Sidebar__Container-sc-1bydltt-0 */
.iXHZSB{background:#fff;position:fixed;top:0;left:0;bottom:0;width:300px;overflow-y:auto;overflow-x:auto;padding:10px 30px 30px 30px;border-right:1px solid #bbb;box-shadow:0 0 20px #ccc;} .iXHZSB a,.iXHZSB a:visited{display:block;color:#000;font-weight:700;margin-top:5px;-webkit-text-decoration:none;text-decoration:none;} .iXHZSB h1,.iXHZSB h2,.iXHZSB h3,.iXHZSB h4,.iXHZSB h5,.iXHZSB h6{font-size:0.75rem !important;font-weight:600;}
/* sc-component-id: Sidebar__SectionHeader-sc-1bydltt-1 */
.eJYOZc{background:#ddd;padding:5px 10px;text-transform:uppercase;border-radius:4px;color:gray;font-size:0.75rem;margin:1.6rem 0;}
/* sc-component-id: Sidebar__Bolt-sc-1bydltt-2 */
.jlBhCp{margin-right:5px;}
/* sc-component-id: PageLayout__Container-ct4rbe-0 */
.bCcHiI{max-width:700px;margin:40px 100px 50px 400px;} .bCcHiI pre{padding:0 !important;} .bCcHiI h1{margin:3rem 0;} .bCcHiI h2,.bCcHiI h3,.bCcHiI h4,.bCcHiI h5,.bCcHiI h6{margin:2rem 0;} .bCcHiI p,.bCcHiI ol,.bCcHiI ul{margin:2rem 0;} .bCcHiI pre > code{border:1px solid #ddd;border-left:4px solid #ddd;display:block;background:#f8f8f8;margin:0;padding:5px;} .bCcHiI a,.bCcHiI a:visited,.bCcHiI a:hover,.bCcHiI a:active{color:#0261cd;font-weight:bold;-webkit-text-decoration:none;text-decoration:none;}</style><meta charSet="utf-8" class="next-head"/><link rel="preload" href="/greldal/_next/static/jc4~JvQqByS2DzJR8BAan/pages/type-safety.js" as="script"/><link rel="preload" href="/greldal/_next/static/jc4~JvQqByS2DzJR8BAan/pages/_app.js" as="script"/><link rel="preload" href="/greldal/_next/static/runtime/webpack-2a7a0f0e8092aec5eb6f.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/commons.91cd11f3db62189844ab.js" as="script"/><link rel="preload" href="/greldal/_next/static/runtime/main-2d47b5361aef32ed1165.js" as="script"/><link rel="preload" href="/greldal/_next/static/chunks/styles.ac071f49e3c32efa6076.js" as="script"/><link rel="stylesheet" href="/greldal/_next/static/css/styles.26d0dfba.chunk.css"/></head><body class="custom_class"><div id="__next"><div><div class="Sidebar__Container-sc-1bydltt-0 iXHZSB"><div style="padding-bottom:10px;display:flex;flex-direction:row;cursor:pointer"><img src="/greldal/_next/static/images/81342499647d5509de6dd828ff74969e.png" style="height:50px;width:50px"/><div style="font-weight:600;font-size:2rem;line-height:50px;padding-left:10px;color:#e535ab">GRelDAL<span class="sc-htpNat dRinVF">Beta</span></div></div><a class="Link__Anchor-sc-1hbrjrd-0 jIsvFx"><div class="Link__TrailingIcon-sc-1hbrjrd-1 cpbcGU">⯈</div>API</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-2 jlBhCp">⚡</span>Quick Start</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-2 jlBhCp">⚡</span>Frequently Asked Questions</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><h1 class="Sidebar__SectionHeader-sc-1bydltt-1 eJYOZc">Guides</h1></a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-2 jlBhCp">⚡</span>Mapping Data Sources</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-2 jlBhCp">⚡</span>Mapping Operations</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-2 jlBhCp">⚡</span>Mapping Associations</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-2 jlBhCp">⚡</span>Best Practices</a><h1 class="Sidebar__SectionHeader-sc-1bydltt-1 eJYOZc">Additional Topics</h1><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-2 jlBhCp">⚡</span>Type Safety</a><a class="Link__Anchor-sc-1hbrjrd-0 fqzCbS"><span class="Sidebar__Bolt-sc-1bydltt-2 jlBhCp">⚡</span>Comparision With Alternatives</a></div><div id="container" class="PageLayout__Container-ct4rbe-0 bCcHiI"><div><h1 id="type-safety"><a href="#type-safety" aria-hidden="true"><span class="icon icon-link"></span></a>Type Safety</h1><p>GRelDAL is written in TypeScript and comes with type definitions. However having type definitions and being type safe are two different things.</p><p>GRelDAL attempts to balance a compromise between type-safety and ease of use. If enforcement of type-safety causes the APIs to significantly depart from
idomatic JavaScript or TypeScript conventions we are usually willing to compromise on type-safety.</p><p>Having said that, we do make a sincere attempt to ensure that as many bugs are caught at the compile time as opposed to run time and your contributions to make this better are very much appreciated.</p><p>In addition, if the error checking has to happen at runtime we try to fail-fast with clear error messages up-front.</p><h2 id="runtime-type-validators"><a href="#runtime-type-validators" aria-hidden="true"><span class="icon icon-link"></span></a>Runtime Type Validators</h2><p>In the introduction section, we saw that stores are defined like this:</p><pre><code class="hljs language-ts" metaString=""><span class="hljs-keyword">import</span> { types, mapDataSource } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;greldal&quot;</span>;

<span class="hljs-keyword">const</span> users = mapDataSource({
    name: <span class="hljs-string">&quot;User&quot;</span>,
    description: <span class="hljs-string">&quot;users&quot;</span>,
    fields: {
        id: {
            <span class="hljs-keyword">type</span>: types.string,
            to: GraphQLID,
        },
        name: {
            <span class="hljs-keyword">type</span>: types.string,
        },
    },
});</code></pre><p>The type specifications (eg. <code>types.string</code>) in the mapping above are referred to as runtime types, and they validate the type of arguments at runtime.
They are not implemented inside GRelDAL - rather, we use <a href="https://github.com/gcanti/io-ts">io-ts</a>, an excellent library by <a href="https://mobile.twitter.com/GiulioCanti">Giulio Canti</a>.</p><p>You may wonder that given GraphQL already does validation of types at boundaries, why bother with this at all.</p><p>There are two reasons:</p><ol><li><p>We can extract out static types from these runtime types. This enables us to write type-safe code, when using TypeScript, without ever having to define any additional types. We can simply derive the types of the entities from the data source mapping itself and if you use incorrect fields or arguments, your code will fail to compile.</p></li><li><p>Runtime types are composable and support <a href="https://github.com/gcanti/io-ts#refinements">refinements</a>, so you can embed generic validation logic in the runtime types and share them across field mappings &amp; argument mappings across multiple stores and operations.</p></li></ol><p>We not only extract static types from runtime types, we also derive GraphQL types from them - so you have to specify only the runtime types for most cases.
In some cases automatic type derivations are not possible and you may need to specify the GraphQL types separately - as is the case with <code>GraphQLID</code> in the snippet above.
The inferred GraphQL type would have been <code>GraphQLString</code> but because we have specified <code>GraphQLID</code> it would take precedence.</p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/type-safety","query":{},"buildId":"jc4~JvQqByS2DzJR8BAan","nextExport":true}</script><script async="" id="__NEXT_PAGE__/type-safety" src="/greldal/_next/static/jc4~JvQqByS2DzJR8BAan/pages/type-safety.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/greldal/_next/static/jc4~JvQqByS2DzJR8BAan/pages/_app.js"></script><script src="/greldal/_next/static/runtime/webpack-2a7a0f0e8092aec5eb6f.js" async=""></script><script src="/greldal/_next/static/chunks/commons.91cd11f3db62189844ab.js" async=""></script><script src="/greldal/_next/static/runtime/main-2d47b5361aef32ed1165.js" async=""></script><script src="/greldal/_next/static/chunks/styles.ac071f49e3c32efa6076.js" async=""></script></body></html>